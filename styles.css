/* Modal animations - FIXED */
#expense-modal,
#settings-modal {
    transition: opacity 0.3s ease-out;
}

#expense-modal > div,
#settings-modal > div {
    transition: all 0.3s ease-out;
}

/* Mobile: slide up from bottom */
@media (max-width: 640px) {
    #expense-modal > div > div,
    #settings-modal > div > div {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Desktop: scale and fade */
@media (min-width: 641px) {
    #expense-modal > div > div,
    #settings-modal > div > div {
        transform: scale(1);
        opacity: 1;
    }
}

/* Smooth scrolling */
html {
    scroll-behavior: smooth;
}

/* Custom scrollbar */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: #f1f5f9;
}

::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
}

/* Loading animation */
@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

.loading {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Touch feedback */
button:active {
    transform: scale(0.98);
}

/* Focus styles for accessibility */
button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
    outline: 2px solid #4F46E5;
    outline-offset: 2px;
}

/* Mobile-specific optimizations */
@media (max-width: 640px) {
    /* Tighter expense cards on mobile */
    #expenses-list > div > div {
        padding: 0.625rem !important; /* 10px */
        gap: 0.5rem !important; /* 8px */
    }
    
    /* Smaller icons on mobile */
    #expenses-list .w-10 {
        width: 2rem !important; /* 32px */
        height: 2rem !important;
    }
    
    /* Slightly smaller amount on mobile */
    #expenses-list .text-lg {
        font-size: 1rem !important; /* 16px */
    }
}

/* Modal mobile optimization */
@media (max-width: 640px) {
    #expense-modal .max-w-lg {
        max-width: 100%;
        margin: 0;
        min-height: 100vh;
        border-radius: 0;
    }
    
    /* Larger touch targets on mobile */
    #expense-modal input,
    #expense-modal select,
    #expense-modal textarea {
        font-size: 16px !important; /* Prevents iOS zoom */
    }
}

/* Dark mode transitions */
* {
    transition-property: background-color, border-color, color;
    transition-duration: 200ms;
    transition-timing-function: ease-in-out;
}

/* Scrollbar styling for dark mode */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    @apply bg-slate-100 dark:bg-slate-800;
}

::-webkit-scrollbar-thumb {
    @apply bg-slate-300 dark:bg-slate-600 rounded-lg;
}

::-webkit-scrollbar-thumb:hover {
    @apply bg-slate-400 dark:bg-slate-500;
}

/* Modal backdrop dark mode */
.modal {
    backdrop-filter: blur(4px);
}

/* Dark mode for inputs */
input[type="text"]:focus,
input[type="number"]:focus,
input[type="date"]:focus,
select:focus,
textarea:focus {
    @apply dark:bg-slate-700 dark:border-slate-600;
}

/* Chart container dark mode */
#treemap-chart svg text {
    transition: none !important;
}

/* Fix date input width on mobile */
input[type="date"] {
    max-width: 100%;
    min-width: 0;
    width: 100%;
}

/* Ensure date picker doesn't overflow */
input[type="date"]::-webkit-calendar-picker-indicator {
    cursor: pointer;
}